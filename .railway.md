# Railway Deployment Guide

## Quick Setup (via Railway UI)

1. **New Project** → Connect GitHub repo: `monopoly-game`

2. **Add 3 Services** (vanuit dezelfde repo):

   ### Service 1: Redis
   - Click "New Service" → "Empty Service"
   - Service Name: `redis`
   - Root Directory: `/monopoly-redis`
   - Deploy

   ### Service 2: Backend  
   - Click "New Service" → "GitHub Repo"
   - Service Name: `backend`
   - Root Directory: `/monopoly-backend`
   - Add Variables:
     ```
     REDIS_HOST = ${{redis.RAILWAY_PRIVATE_DOMAIN}}:6379
     CORS_ALLOW_ORIGIN = https://${{frontend.RAILWAY_PUBLIC_DOMAIN}}
     APP_ENV = prod
     APP_DEBUG = 0
     ```
   - Deploy

   ### Service 3: Frontend
   - Click "New Service" → "GitHub Repo"  
   - Service Name: `frontend`
   - Root Directory: `/monopoly-frontend`
   - Add Variables:
     ```
     NEXT_PUBLIC_API_URL = https://${{backend.RAILWAY_PUBLIC_DOMAIN}}
     NEXT_PUBLIC_WS_URL = wss://${{backend.RAILWAY_PUBLIC_DOMAIN}}
     ```
   - Deploy

3. **Done!** Railway detecteert automatisch:
   - Redis: Dockerfile in `/monopoly-redis`
   - Backend: Dockerfile in `/monopoly-backend` + `railway.toml`
   - Frontend: Next.js via Nixpacks + `railway.toml`

## Deploy volgorde
1. Redis eerst (heeft geen dependencies)
2. Backend (wacht tot Redis ready is)
3. Frontend (wacht tot Backend ready is)

## Troubleshooting

**"Service won't start":**
- Check logs voor errors
- Verify environment variables zijn correct gekoppeld
- Check Root Directory is exact: `/monopoly-redis`, `/monopoly-backend`, `/monopoly-frontend`

**"Can't connect to Redis":**
- Use `RAILWAY_PRIVATE_DOMAIN` niet public domain
- Redis port is 6379

**"WebSocket not connecting":**
- Frontend moet `wss://` gebruiken (niet `ws://`)
- CORS moet frontend domain toestaan

